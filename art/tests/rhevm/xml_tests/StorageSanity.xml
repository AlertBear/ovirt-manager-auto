<?xml version="1.0" encoding="UTF-8"?>
<!-- vim: set ts=3 sw=3 expandtab: -->
<?xml-stylesheet type="text/xsl" href="table.xslt"?>

<input>
<test_case>
   <test_name>START_GROUP: Create_remove_data_center</test_name>
   <test_action/>
   <parameters>n/a2</parameters>
   <positive>NONE</positive>
   <run/>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Add data center '{data_center_type}'</test_name>
   <test_action>addDataCenter</test_action>
   <parameters>name='{data_center_type}StorageTest', storage_type='{data_center_type}', version='{compatibility_version}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Add cluster '{data_center_type}'</test_name>
   <test_action>addCluster</test_action>
   <parameters>name='{data_center_type}StorageTest', cpu='{cpu_name}', data_center='{data_center_type}StorageTest', version='{compatibility_version}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Add hosts '{data_center_type}'</test_name>
   <test_action>addHost</test_action>
   <parameters>name='{vds}', root_password='{vds_password}', cluster='{data_center_type}StorageTest', wait=False, vdcPort='{port}'</parameters>
   <positive>TRUE</positive>
   <run>loop({vds},{vds_password})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Wait for all hosts are UP '{data_center_type}'</test_name>
   <test_action>waitForHostsStates</test_action>
   <parameters>names='[vds]'</parameters>
   <positive>TRUE</positive>
   <run>YES</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>iscsi discover</test_name>
   <test_action>iscsiDiscover</test_action>
   <parameters>host='{vds[0]}', address='{lun_address}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_iscsi}');loop({lun_address})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>iscsi login</test_name>
   <test_action>iscsiLogin</test_action>
   <parameters>host='{vds[0]}', address='{lun_address}', target='{lun_target}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_iscsi}');loop({lun_address},{lun_target})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>create data domain NFS</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_nfs}', address='{data_domain_address}', host='{vds[0]}', path='{data_domain_path}', nfs_version={nfs_version}</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_nfs}');loop({data_domain_path},{data_domain_address})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Create data domain POSIXFS</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}',storage_type='e{storage_type_posixfs}',address='{gluster_address}', host='{vds[0]}', path='{gluster_path}', vfs_type='{vfs_type}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_posixfs}');loop({gluster_path},{gluster_address})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>create data domain ISCSI</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_iscsi}', host='{vds[0]}', lun='{lun}', lun_address='{lun_address}', lun_target='{lun_target}', lun_port=3260</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_iscsi}');loop({lun},{lun_address},{lun_target})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>create data domain FCP</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_fcp}', host='{vds[0]}', lun='{lun}', lun_port=3260</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_fcp}');loop({lun})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>create data domain local</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_local}', host='{vds[0]}', path='{local_domain_path}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_local}');loop({local_domain_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Create iso domain for '{data_center_type}'</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_ISO', type='e{storage_dom_type_iso}', storage_type='e{storage_type_nfs}', address='{tests_iso_domain_address}', host='{vds[0]}', path='{tests_iso_domain_path}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>attach data Storage domain to data center NFS</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_data_domain_#loop_index'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_nfs}');loop({data_domain_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Attach data Storage domain to data center POSIXFS</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest',storagedomain='{data_center_type}StorageTest_data_domain_#loop_index'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_posixfs}');loop({gluster_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>attach data Storage domain to data center ISCSI/FCP</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_data_domain_#loop_index'</parameters>
   <positive>TRUE</positive>
   <run>if(('{data_center_type}'=='e{storage_type_iscsi}') or ('{data_center_type}'=='e{storage_type_fcp}'));loop({lun})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>attach iso Storage domain to data center '{data_center_type}'</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_ISO'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Activate Non Master Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='activate', type='all'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>iscsi discover</test_name>
   <test_action>iscsiDiscover</test_action>
   <parameters>host='{vds[0]}', address='{extend_lun_address}'</parameters>
   <positive>TRUE</positive>
   <run>if(('{extend_lun}' is not 'None') and ('{data_center_type}'=='e{storage_type_iscsi}'))</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>iscsi login</test_name>
   <test_action>iscsiLogin</test_action>
   <parameters>host='{vds[0]}', address='{extend_lun_address}', target='{extend_lun_target}'</parameters>
   <positive>TRUE</positive>
   <run>if(('{extend_lun}' is not 'None') and ('{data_center_type}'=='e{storage_type_iscsi}'))</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>extend storage domain ISCSI</test_name>
   <test_action>extendStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_0', lun='{extend_lun}', lun_address='{extend_lun_address}', lun_target='{extend_lun_target}', lun_port=3260, host='{vds[0]}', storage_type= 'e{storage_type_iscsi}'</parameters>
   <positive>TRUE</positive>
   <run>if(('{extend_lun}' is not 'None') and ('{data_center_type}'=='e{storage_type_iscsi}')) </run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>extend storage domain FCP</test_name>
   <test_action>extendStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_0', lun='{extend_lun}', host='{vds[0]}', storage_type= 'e{storage_type_fcp}'</parameters>
   <positive>TRUE</positive>
   <run>if(('{extend_lun}' is not 'None') and ('{data_center_type}'=='e{storage_type_fcp}'))</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Validate storage data NFS</test_name>
   <test_action>validateEntityStatus</test_action>
   <parameters>element='storagedomain', collection='storagedomains', elementName='{data_center_type}StorageTest_data_domain_#loop_index', expectedStatus='e{storage_domain_state_active}', dcName='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_nfs}');loop({data_domain_path})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Validate storage data local</test_name>
   <test_action>validateEntityStatus</test_action>
   <parameters>element='storagedomain', collection='storagedomains', elementName='{data_center_type}StorageTest_data_domain_#loop_index', expectedStatus='e{storage_domain_state_active}', dcName='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_local}');loop({local_domain_path})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Validate storage data POSIXFS</test_name>
   <test_action>validateEntityStatus</test_action>
   <parameters>element='storagedomain', collection='storagedomains', elementName='{data_center_type}StorageTest_data_domain_#loop_index', expectedStatus='e{storage_domain_state_active}', dcName='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_posixfs}');loop({gluster_path})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Validate storage data ISCSI/FCP</test_name>
   <test_action>validateEntityStatus</test_action>
   <parameters>element='storagedomain', collection='storagedomains', elementName='{data_center_type}StorageTest_data_domain_#loop_index', expectedStatus='e{storage_domain_state_active}', dcName='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>if(('{data_center_type}'=='e{storage_type_iscsi}') or ('{data_center_type}'=='e{storage_type_fcp}'));loop({lun})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Validate storage ISO of '{data_center_type}'</test_name>
   <test_action>validateEntityStatus</test_action>
   <parameters>element='storagedomain', collection='storagedomains', elementName='{data_center_type}StorageTest_ISO', expectedStatus='e{storage_domain_state_active}', dcName='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Deactivate Non Master Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='deactivate', type='all'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Detach Non Master Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='detach', type='all'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Deactivate storage data Master '{data_center_type}'</test_name>
   <test_action>deactivateStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_data_domain_0'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Remove data center '{data_center_type}'</test_name>
   <test_action>removeDataCenter</test_action>
   <parameters>datacenter='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove DATA storage domains NFS</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_#loop_index', host='{vds[0]}', format='true'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_nfs}');loop({data_domain_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove DATA storage domains POSIXFS</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_#loop_index',host='{vds[0]}',format='true'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_posixfs}');loop({gluster_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove DATA storage domains ISCSI/FCP</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_#loop_index', host='{vds[0]}', format='true'</parameters>
   <positive>TRUE</positive>
   <run>if(('{data_center_type}'=='e{storage_type_iscsi}') or ('{data_center_type}'=='e{storage_type_fcp}'));loop({lun})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove ISO storage domain of '{data_center_type}'</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_ISO', host='{vds[0]}', format='true'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>END_GROUP: Create_remove_data_center</test_name>
   <test_action/>
   <parameters/>
   <positive>NONE</positive>
   <run/>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>START_GROUP: Change_domain_status</test_name>
   <test_action/>
   <parameters>n/a2</parameters>
   <positive>NONE</positive>
   <run/>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Add data center '{data_center_type}'</test_name>
   <test_action>addDataCenter</test_action>
   <parameters>name='{data_center_type}StorageTest', storage_type='{data_center_type}', version='{compatibility_version}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Connect cluster to Data Center '{data_center_type}'</test_name>
   <test_action>connectClusterToDataCenter</test_action>
   <parameters>cluster='{data_center_type}StorageTest', datacenter='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>iscsi discover</test_name>
   <test_action>iscsiDiscover</test_action>
   <parameters>host='{vds[0]}', address='{lun_address}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_iscsi}');loop({lun_address})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>iscsi login</test_name>
   <test_action>iscsiLogin</test_action>
   <parameters>host='{vds[0]}', address='{lun_address}', target='{lun_target}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_iscsi}');loop({lun_address},{lun_target})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>create data domain NFS</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_nfs}', address='{data_domain_address}', host='{vds[0]}', path='{data_domain_path}', nfs_version={nfs_version}</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_nfs}');loop({data_domain_path},{data_domain_address})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>create data domain LOCAL</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_local}', path='{local_domain_path}', host='{vds[0]}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_local}');loop({local_domain_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Create data domain POSIXFS</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index',type='e{storage_dom_type_data}',storage_type='e{storage_type_posixfs}',address='{gluster_address}',host='{vds[0]}',path='{gluster_path}', vfs_type='{vfs_type}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_posixfs}');loop({gluster_path},{gluster_address})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>create data domain ISCSI</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_iscsi}', host='{vds[0]}', lun='{lun}', lun_address='{lun_address}', lun_target='{lun_target}', lun_port=3260</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_iscsi}');loop({lun},{lun_address},{lun_target})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>create data domain FCP</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_fcp}', host='{vds[0]}', lun='{lun}', lun_port=3260</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_fcp}');loop({lun})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Create iso domain for '{data_center_type}'</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_ISO', type='e{storage_dom_type_iso}', storage_type='e{storage_type_nfs}', address='{tests_iso_domain_address}', host='{vds[0]}', path='{tests_iso_domain_path}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>attach data Storage domain to data center NFS</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_data_domain_#loop_index'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_nfs}');loop({data_domain_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Attach data Storage domain to data center POSIXFS</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest',storagedomain='{data_center_type}StorageTest_data_domain_#loop_index'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_posixfs}');loop({gluster_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>attach data Storage domain to data center ISCSI/FCP</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_data_domain_#loop_index'</parameters>
   <positive>TRUE</positive>
   <run>if(('{data_center_type}'=='e{storage_type_iscsi}') or ('{data_center_type}'=='e{storage_type_fcp}'));loop({lun})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>attach iso Storage domain to data center</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_ISO'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Activate Non Master Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='activate', type='all'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Detach Non Master Data Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='detach', type='e{storage_dom_type_data}'</parameters>
   <positive>FALSE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Deactivate Non Master Data Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='deactivate', type='e{storage_dom_type_data}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Activate Non Master Data Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='activate', type='e{storage_dom_type_data}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Deactivate Non Master Data Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='deactivate', type='e{storage_dom_type_data}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Detach Non Master Data Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='detach', type='e{storage_dom_type_data}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Attach Non Master Data Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='attach', type='e{storage_dom_type_data}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Activate Non Master Data Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='activate', type='e{storage_dom_type_data}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Deactivate Non Master Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='deactivate', type='all'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Detach Non Master Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='detach', type='all'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Deactivate storage data Master '{data_center_type}'</test_name>
   <test_action>deactivateStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_data_domain_0'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove data center '{data_center_type}'</test_name>
   <test_action>removeDataCenter</test_action>
   <parameters>datacenter='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove DATA storage domains NFS</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_#loop_index', host='{vds[0]}', format='true'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_nfs}');loop({data_domain_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove DATA storage domains POSIXFS</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_#loop_index',host='{vds[0]}',format='true'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_posixfs}');loop({gluster_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove DATA storage domains ISCSI/FCP</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_#loop_index', host='{vds[0]}', format='true'</parameters>
   <positive>TRUE</positive>
   <run>if(('{data_center_type}'=='e{storage_type_iscsi}') or ('{data_center_type}'=='e{storage_type_fcp}'));loop({lun})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove ISO storage domain '{data_center_type}'</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_ISO', host='{vds[0]}', format='true'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>END_GROUP: Change_domain_status</test_name>
   <test_action/>
   <parameters/>
   <positive>NONE</positive>
   <run/>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>START_GROUP: Change_Master_domain</test_name>
   <test_action/>
   <parameters>n/a2</parameters>
   <positive>NONE</positive>
   <run>if(('{data_center_type}' == 'e{storage_type_nfs}' and 1&lt;len('[data_domain_path]'.split(', '))) or ('{data_center_type}' == 'e{storage_type_iscsi}' and 1&lt;len('[lun]'.split(', '))) or ('{data_center_type}' == 'e{storage_type_fcp}' and 1&lt;len('[lun]'.split(', '))) or ('{data_center_type}' == 'e{storage_type_local}' and 1&lt;len('[local_domain_path]'.split(', '))))</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Add data center '{data_center_type}'</test_name>
   <test_action>addDataCenter</test_action>
   <parameters>name='{data_center_type}StorageTest', storage_type='{data_center_type}', version='{compatibility_version}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Connect cluster to Data Center '{data_center_type}'</test_name>
   <test_action>connectClusterToDataCenter</test_action>
   <parameters>cluster='{data_center_type}StorageTest', datacenter='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>iscsi discover</test_name>
   <test_action>iscsiDiscover</test_action>
   <parameters>host='{vds[0]}', address='{lun_address}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_iscsi}');loop({lun_address})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>iscsi login</test_name>
   <test_action>iscsiLogin</test_action>
   <parameters>host='{vds[0]}', address='{lun_address}', target='{lun_target}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_iscsi}');loop({lun_address},{lun_target})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>create data domain NFS</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_nfs}', address='{data_domain_address}', host='{vds[0]}', path='{data_domain_path}', nfs_version={nfs_version}</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_nfs}');loop({data_domain_path},{data_domain_address})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>create data domain LOCAL</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_local}', host='{vds[0]}', path='{local_domain_path}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_local}');loop({local_domain_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Create data domain POSIXFS</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index',type='e{storage_dom_type_data}',storage_type='e{storage_type_posixfs}',address='{gluster_address}',host='{vds[0]}',path='{gluster_path}', vfs_type='{vfs_type}'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_posixfs}');loop({gluster_path},{gluster_address})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>create data domain ISCSI</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_iscsi}', host='{vds[0]}', lun='{lun}', lun_address='{lun_address}', lun_target='{lun_target}', lun_port=3260</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_iscsi}');loop({lun},{lun_address},{lun_target})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>create data domain FCP</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_data_domain_#loop_index', type='e{storage_dom_type_data}', storage_type='e{storage_type_fcp}', host='{vds[0]}', lun='{lun}', lun_port=3260</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_fcp}');loop({lun})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Create iso domain '{data_center_type}'</test_name>
   <test_action>addStorageDomain</test_action>
   <parameters>name='{data_center_type}StorageTest_ISO', type='e{storage_dom_type_iso}', storage_type='e{storage_type_nfs}', address='{tests_iso_domain_address}', host='{vds[0]}', path='{tests_iso_domain_path}'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>attach data Storage domain to data center NFS</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_data_domain_#loop_index'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_nfs}');loop({data_domain_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Attach data Storage domain to data center POSIXFS</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest',storagedomain='{data_center_type}StorageTest_data_domain_#loop_index'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_posixfs}');loop({gluster_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>attach data Storage domain to data center ISCSI/FCP</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_data_domain_#loop_index'</parameters>
   <positive>TRUE</positive>
   <run>if(('{data_center_type}'=='e{storage_type_iscsi}') or ('{data_center_type}'=='e{storage_type_fcp}'));loop({lun})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>attach iso Storage domain to data center '{data_center_type}'</test_name>
   <test_action>attachStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_ISO'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>activateNonMasterDomains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='activate', type='all'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Deactivate storage data Master '{data_center_type}'</test_name>
   <test_action>deactivateStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_data_domain_0'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Verify Storage data 0 not Master anymore '{data_center_type}'</test_name>
   <test_action>isStorageDomainMaster</test_action>
   <parameters>dataCenterName='{data_center_type}StorageTest', storageDomainName='{data_center_type}StorageTest_data_domain_0'</parameters>
   <positive>FALSE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>findMasterStorageDomain '{data_center_type}'</test_name>
   <test_action>findMasterStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output>masterDomain-&gt;masterDomain</fetch_output>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>activate storage data 0 '{data_center_type}'</test_name>
   <test_action>activateStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain='{data_center_type}StorageTest_data_domain_0'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Deactivate Non Master Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='deactivate', type='all'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Detach Non Master Domains '{data_center_type}'</test_name>
   <test_action>execOnNonMasterDomains</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', operation='detach', type='all'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Deactivate storage data Master '{data_center_type}'</test_name>
   <test_action>deactivateStorageDomain</test_action>
   <parameters>datacenter='{data_center_type}StorageTest', storagedomain=%masterDomain%</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove data center '{data_center_type}'</test_name>
   <test_action>removeDataCenter</test_action>
   <parameters>datacenter='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove DATA storage domains NFS</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_#loop_index', host='{vds[0]}', format='true'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_nfs}');loop({data_domain_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove DATA storage domains POSIXFS</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_#loop_index',host='{vds[0]}',format='true'</parameters>
   <positive>TRUE</positive>
   <run>if('{data_center_type}'=='e{storage_type_posixfs}');loop({gluster_path})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove DATA storage domains ISCSI/FCP</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_data_domain_#loop_index', host='{vds[0]}', format='true'</parameters>
   <positive>TRUE</positive>
   <run>if(('{data_center_type}'=='e{storage_type_iscsi}') or ('{data_center_type}'=='e{storage_type_fcp}'));loop({lun})</run>
   <fetch_output/>
   <vital>TRUE</vital>
</test_case>
<test_case>
   <test_name>Remove ISO storage domain '{data_center_type}'</test_name>
   <test_action>removeStorageDomain</test_action>
   <parameters>storagedomain='{data_center_type}StorageTest_ISO', host='{vds[0]}', format='true'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>END_GROUP: Change_Master_domain</test_name>
   <test_action/>
   <parameters/>
   <positive>NONE</positive>
   <run/>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>START_GROUP:CleanUp</test_name>
   <test_action/>
   <parameters>n/a2</parameters>
   <positive>NONE</positive>
   <run/>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Set Host To Maintenance '{data_center_type}'</test_name>
   <test_action>deactivateHost</test_action>
   <parameters>host='{vds}'</parameters>
   <positive>TRUE</positive>
   <run>loop({vds})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Remove Inactive Host '{data_center_type}'</test_name>
   <test_action>removeHost</test_action>
   <parameters>host='{vds}'</parameters>
   <positive>TRUE</positive>
   <run>loop({vds})</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>Remove Clusters '{data_center_type}'</test_name>
   <test_action>removeClusters</test_action>
   <parameters>clusters='{data_center_type}StorageTest'</parameters>
   <positive>TRUE</positive>
   <run>yes</run>
   <fetch_output/>
</test_case>
<test_case>
   <test_name>END_GROUP:CleanUp</test_name>
   <test_action/>
   <parameters/>
   <positive>NONE</positive>
   <run/>
   <fetch_output/>
</test_case>
</input>
