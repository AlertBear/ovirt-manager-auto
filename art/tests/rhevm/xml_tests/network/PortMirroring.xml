<!--
Author: awinter
This is a temporery test to test the functionality of portmirroring.
(This xml is ran via HotPlugNic.xml)
-->

<input>
  <test_case>
    <test_name>Add nic3 with portmirroring with network sw1</test_name>
    <test_action>addNic</test_action>
    <parameters>vm='{vm_name}',name='nic3', interface='e{nic_type_rtl8139}', network='{networks[0]}',active='false',portmirroring='{networks[0]}'</parameters>
    <positive>TRUE</positive>
    <run>loop({vm_name})</run>
    <fetch_output/>
    <report>YES</report>
    <vital>FALSE</vital>
    <test_description/>
  </test_case>
  <test_case>
     <test_name>Add nic4 without portmirroring with network sw1</test_name>
     <test_action>addNic</test_action>
     <parameters>vm='{vm_name}',name='nic4', interface='e{nic_type_rtl8139}', network='{networks[0]}',active='false'</parameters>
     <positive>TRUE</positive>
     <run>loop({vm_name})</run>
     <fetch_output/>
     <report>YES</report>
     <vital>FALSE</vital>
     <test_description/>
  </test_case>
  <test_case>
     <test_name>Edit nic3 network to be without portmirroring</test_name>
     <test_action>updateNic</test_action>
     <parameters>vm='{vm_name}',nic='nic3',network='{networks[0]}'</parameters>
     <positive>TRUE</positive>
     <run>loop({vm_name})</run>
     <fetch_output/>
     <report>YES</report>
     <vital>FALSE</vital>
     <test_description/>
  </test_case>
  <test_case>
      <test_name>Edit nic4 network to be with portmirroring</test_name>
      <test_action>updateNic</test_action>
      <parameters>vm='{vm_name}',nic='nic4',network='{networks[0]}', portmirroring='{networks[0]}'</parameters>
      <positive>TRUE</positive>
      <run>loop({vm_name})</run>
      <fetch_output/>
      <report>YES</report>
      <vital>FALSE</vital>
      <test_description/>
  </test_case>
  <test_case>
     <test_name>Remove nic3</test_name>
     <test_action>removeNic</test_action>
     <parameters>vm='{vm_name}',nic='nic3'</parameters>
     <positive>TRUE</positive>
     <run>loop({vm_name})</run>
     <fetch_output/>
     <report>YES</report>
     <vital>FALSE</vital>
     <test_description/>
  </test_case>
  <test_case>
     <test_name>Remove nic4</test_name>
     <test_action>removeNic</test_action>
     <parameters>vm='{vm_name}',nic='nic4'</parameters>
     <positive>TRUE</positive>
     <run>loop({vm_name})</run>
     <fetch_output/>
     <report>YES</report>
     <vital>FALSE</vital>
     <test_description/>
  </test_case>
</input>
